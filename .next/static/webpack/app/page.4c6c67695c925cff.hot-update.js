"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/useAuth.ts":
/*!**************************!*\
  !*** ./hooks/useAuth.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; }\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction useAuth() {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [localUserData, setLocalUserData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Get user data from localStorage\n    const getLocalUserData = ()=>{\n        try {\n            const userData = localStorage.getItem(\"musicapp_user\");\n            if (userData) {\n                const parsed = JSON.parse(userData);\n                console.log(\"\\uD83D\\uDCF1 Retrieved user data from localStorage:\", parsed);\n                return parsed;\n            }\n            console.log(\"\\uD83D\\uDCF1 No user data found in localStorage\");\n            return null;\n        } catch (error) {\n            console.error(\"❌ Error parsing localStorage user data:\", error);\n            return null;\n        }\n    };\n    // Save user data to localStorage\n    const saveLocalUserData = (userData)=>{\n        try {\n            localStorage.setItem(\"musicapp_user\", JSON.stringify(userData));\n            console.log(\"\\uD83D\\uDCBE Saved user data to localStorage:\", userData);\n            setLocalUserData(userData);\n        } catch (error) {\n            console.error(\"❌ Error saving user data to localStorage:\", error);\n        }\n    };\n    // Clear user data from localStorage\n    const clearLocalUserData = ()=>{\n        try {\n            localStorage.removeItem(\"musicapp_user\");\n            console.log(\"\\uD83D\\uDDD1️ Cleared user data from localStorage\");\n            setLocalUserData(null);\n        } catch (error) {\n            console.error(\"❌ Error clearing localStorage:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        console.log(\"\\uD83D\\uDD04 useAuth effect started\");\n        // Check localStorage first for immediate user data\n        const localData = getLocalUserData();\n        if (localData) {\n            setLocalUserData(localData);\n            console.log(\"✅ Using localStorage user data for immediate access\");\n        }\n        // Get initial session with timeout\n        const getInitialSession = async ()=>{\n            try {\n                console.log(\"\\uD83D\\uDD0D Checking for existing session...\");\n                // Set a timeout for the session check\n                const sessionPromise = _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getSession();\n                const timeoutPromise = new Promise((_, reject)=>setTimeout(()=>reject(new Error(\"Session timeout\")), 8000));\n                const { data: { session }, error } = await Promise.race([\n                    sessionPromise,\n                    timeoutPromise\n                ]);\n                if (error) {\n                    console.error(\"❌ Session error:\", error);\n                    if (mounted) {\n                        // If session fails but we have local data, use it\n                        if (localData) {\n                            console.log(\"⚠️ Session failed but using localStorage data\");\n                            setUser(null) // No session user but keep local data\n                            ;\n                            setLoading(false);\n                        } else {\n                            console.log(\"❌ No session and no localStorage data\");\n                            setUser(null);\n                            setLocalUserData(null);\n                            setLoading(false);\n                        }\n                    }\n                    return;\n                }\n                if (mounted) {\n                    if (session === null || session === void 0 ? void 0 : session.user) {\n                        var _session_user_user_metadata, _session_user_user_metadata1, _session_user_user_metadata2;\n                        console.log(\"✅ Valid session found for user:\", session.user.email);\n                        setUser(session.user);\n                        // Update localStorage with fresh session data\n                        const userData = {\n                            id: session.user.id,\n                            email: session.user.email,\n                            username: ((_session_user_user_metadata = session.user.user_metadata) === null || _session_user_user_metadata === void 0 ? void 0 : _session_user_user_metadata.full_name) || ((_session_user_user_metadata1 = session.user.user_metadata) === null || _session_user_user_metadata1 === void 0 ? void 0 : _session_user_user_metadata1.name),\n                            avatar_url: (_session_user_user_metadata2 = session.user.user_metadata) === null || _session_user_user_metadata2 === void 0 ? void 0 : _session_user_user_metadata2.avatar_url\n                        };\n                        saveLocalUserData(userData);\n                    } else {\n                        console.log(\"❌ No valid session found\");\n                        // If no session but we have local data, keep using it\n                        if (!localData) {\n                            setUser(null);\n                            setLocalUserData(null);\n                        }\n                    }\n                    setLoading(false);\n                }\n            } catch (error) {\n                console.error(\"❌ Failed to get session:\", error);\n                if (mounted) {\n                    // If session check fails but we have local data, use it\n                    if (localData) {\n                        console.log(\"⚠️ Session check failed but using localStorage data\");\n                        setUser(null);\n                        setLoading(false);\n                    } else {\n                        console.log(\"❌ Session check failed and no localStorage data\");\n                        setUser(null);\n                        setLocalUserData(null);\n                        setLoading(false);\n                    }\n                }\n            }\n        };\n        getInitialSession();\n        // Listen for auth changes\n        const { data: { subscription } } = _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.onAuthStateChange(async (event, session)=>{\n            var _session_user;\n            console.log(\"\\uD83D\\uDD04 Auth state changed:\", event, session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.email);\n            if (!mounted) return;\n            if (event === \"SIGNED_OUT\" || !session) {\n                console.log(\"\\uD83D\\uDC4B User signed out\");\n                setUser(null);\n                clearLocalUserData();\n                setLoading(false);\n                return;\n            }\n            if (event === \"SIGNED_IN\" && (session === null || session === void 0 ? void 0 : session.user)) {\n                var _session_user_user_metadata, _session_user_user_metadata1, _session_user_user_metadata2;\n                console.log(\"\\uD83D\\uDC4B User signed in:\", session.user.email);\n                setUser(session.user);\n                setLoading(false);\n                // Save user data to localStorage\n                const userData = {\n                    id: session.user.id,\n                    email: session.user.email,\n                    username: ((_session_user_user_metadata = session.user.user_metadata) === null || _session_user_user_metadata === void 0 ? void 0 : _session_user_user_metadata.full_name) || ((_session_user_user_metadata1 = session.user.user_metadata) === null || _session_user_user_metadata1 === void 0 ? void 0 : _session_user_user_metadata1.name),\n                    avatar_url: (_session_user_user_metadata2 = session.user.user_metadata) === null || _session_user_user_metadata2 === void 0 ? void 0 : _session_user_user_metadata2.avatar_url\n                };\n                saveLocalUserData(userData);\n                // Update last_login when user signs in\n                try {\n                    console.log(\"\\uD83D\\uDCDD Updating user data in database...\");\n                    await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").upsert({\n                        id: session.user.id,\n                        email: session.user.email,\n                        username: userData.username,\n                        avatar_url: userData.avatar_url,\n                        last_login: new Date().toISOString()\n                    });\n                    console.log(\"✅ User data updated in database\");\n                } catch (error) {\n                    console.error(\"❌ Error updating user data:\", error);\n                }\n            } else {\n                var _session_user1;\n                setUser((_session_user1 = session === null || session === void 0 ? void 0 : session.user) !== null && _session_user1 !== void 0 ? _session_user1 : null);\n                setLoading(false);\n            }\n        });\n        return ()=>{\n            mounted = false;\n            subscription.unsubscribe();\n            console.log(\"\\uD83D\\uDD04 useAuth cleanup completed\");\n        };\n    }, []);\n    const signInWithGoogle = async ()=>{\n        try {\n            console.log(\"\\uD83D\\uDD10 Starting Google sign in...\");\n            setLoading(true);\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signInWithOAuth({\n                provider: \"google\",\n                options: {\n                    redirectTo: \"\".concat(window.location.origin),\n                    queryParams: {\n                        access_type: \"offline\",\n                        prompt: \"consent\"\n                    }\n                }\n            });\n            if (error) {\n                console.error(\"❌ Error signing in:\", error);\n                setLoading(false);\n            } else {\n                console.log(\"✅ Google sign in initiated\");\n            }\n        } catch (error) {\n            console.error(\"❌ Sign in error:\", error);\n            setLoading(false);\n        }\n    };\n    const signOut = async ()=>{\n        try {\n            console.log(\"\\uD83D\\uDC4B Starting sign out...\");\n            setLoading(true);\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.signOut();\n            if (error) {\n                console.error(\"❌ Error signing out:\", error);\n            } else {\n                console.log(\"✅ Successfully signed out\");\n            }\n            // Clear all cached data\n            localStorage.clear();\n            sessionStorage.clear();\n            clearLocalUserData();\n            setUser(null);\n            setLoading(false);\n        } catch (error) {\n            console.error(\"❌ Sign out error:\", error);\n            setLoading(false);\n        }\n    };\n    // Return both session user and local user data\n    // Priority: use session user if available, otherwise use local data\n    const effectiveUser = user || (localUserData ? {\n        id: localUserData.id,\n        email: localUserData.email,\n        user_metadata: {\n            full_name: localUserData.username,\n            name: localUserData.username,\n            avatar_url: localUserData.avatar_url\n        }\n    } : null);\n    return {\n        user: effectiveUser,\n        localUserData,\n        loading,\n        signInWithGoogle,\n        signOut,\n        getUserId: ()=>(localUserData === null || localUserData === void 0 ? void 0 : localUserData.id) || (user === null || user === void 0 ? void 0 : user.id) || null,\n        isAuthenticated: !!(localUserData || user)\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUF1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUVFO0FBU3BDLFNBQVNHO0lBQ2QsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUdILCtDQUFRQSxDQUFjO0lBQzlDLE1BQU0sQ0FBQ0ksZUFBZUMsaUJBQWlCLEdBQUdMLCtDQUFRQSxDQUF1QjtJQUN6RSxNQUFNLENBQUNNLFNBQVNDLFdBQVcsR0FBR1AsK0NBQVFBLENBQUM7SUFFdkMsa0NBQWtDO0lBQ2xDLE1BQU1RLG1CQUFtQjtRQUN2QixJQUFJO1lBQ0YsTUFBTUMsV0FBV0MsYUFBYUMsT0FBTyxDQUFDO1lBQ3RDLElBQUlGLFVBQVU7Z0JBQ1osTUFBTUcsU0FBU0MsS0FBS0MsS0FBSyxDQUFDTDtnQkFDMUJNLFFBQVFDLEdBQUcsQ0FBQyx1REFBNkNKO2dCQUN6RCxPQUFPQTtZQUNUO1lBQ0FHLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU87UUFDVCxFQUFFLE9BQU9DLE9BQU87WUFDZEYsUUFBUUUsS0FBSyxDQUFDLDJDQUEyQ0E7WUFDekQsT0FBTztRQUNUO0lBQ0Y7SUFFQSxpQ0FBaUM7SUFDakMsTUFBTUMsb0JBQW9CLENBQUNUO1FBQ3pCLElBQUk7WUFDRkMsYUFBYVMsT0FBTyxDQUFDLGlCQUFpQk4sS0FBS08sU0FBUyxDQUFDWDtZQUNyRE0sUUFBUUMsR0FBRyxDQUFDLGlEQUF1Q1A7WUFDbkRKLGlCQUFpQkk7UUFDbkIsRUFBRSxPQUFPUSxPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzdEO0lBQ0Y7SUFFQSxvQ0FBb0M7SUFDcEMsTUFBTUkscUJBQXFCO1FBQ3pCLElBQUk7WUFDRlgsYUFBYVksVUFBVSxDQUFDO1lBQ3hCUCxRQUFRQyxHQUFHLENBQUM7WUFDWlgsaUJBQWlCO1FBQ25CLEVBQUUsT0FBT1ksT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsa0NBQWtDQTtRQUNsRDtJQUNGO0lBRUFsQixnREFBU0EsQ0FBQztRQUNSLElBQUl3QixVQUFVO1FBQ2RSLFFBQVFDLEdBQUcsQ0FBQztRQUVaLG1EQUFtRDtRQUNuRCxNQUFNUSxZQUFZaEI7UUFDbEIsSUFBSWdCLFdBQVc7WUFDYm5CLGlCQUFpQm1CO1lBQ2pCVCxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUVBLG1DQUFtQztRQUNuQyxNQUFNUyxvQkFBb0I7WUFDeEIsSUFBSTtnQkFDRlYsUUFBUUMsR0FBRyxDQUFDO2dCQUVaLHNDQUFzQztnQkFDdEMsTUFBTVUsaUJBQWlCNUIsbURBQVFBLENBQUM2QixJQUFJLENBQUNDLFVBQVU7Z0JBQy9DLE1BQU1DLGlCQUFpQixJQUFJQyxRQUFRLENBQUNDLEdBQUdDLFNBQ3JDQyxXQUFXLElBQU1ELE9BQU8sSUFBSUUsTUFBTSxxQkFBcUI7Z0JBR3pELE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUUsRUFBRW5CLEtBQUssRUFBRSxHQUFHLE1BQU1hLFFBQVFPLElBQUksQ0FBQztvQkFDdERYO29CQUNBRztpQkFDRDtnQkFFRCxJQUFJWixPQUFPO29CQUNURixRQUFRRSxLQUFLLENBQUMsb0JBQW9CQTtvQkFDbEMsSUFBSU0sU0FBUzt3QkFDWCxrREFBa0Q7d0JBQ2xELElBQUlDLFdBQVc7NEJBQ2JULFFBQVFDLEdBQUcsQ0FBQzs0QkFDWmIsUUFBUSxNQUFNLHNDQUFzQzs7NEJBQ3BESSxXQUFXO3dCQUNiLE9BQU87NEJBQ0xRLFFBQVFDLEdBQUcsQ0FBQzs0QkFDWmIsUUFBUTs0QkFDUkUsaUJBQWlCOzRCQUNqQkUsV0FBVzt3QkFDYjtvQkFDRjtvQkFDQTtnQkFDRjtnQkFFQSxJQUFJZ0IsU0FBUztvQkFDWCxJQUFJYSxvQkFBQUEsOEJBQUFBLFFBQVNsQyxJQUFJLEVBQUU7NEJBUUxrQyw2QkFBeUNBLDhCQUN2Q0E7d0JBUmRyQixRQUFRQyxHQUFHLENBQUMsbUNBQW1Db0IsUUFBUWxDLElBQUksQ0FBQ29DLEtBQUs7d0JBQ2pFbkMsUUFBUWlDLFFBQVFsQyxJQUFJO3dCQUVwQiw4Q0FBOEM7d0JBQzlDLE1BQU1PLFdBQTBCOzRCQUM5QjhCLElBQUlILFFBQVFsQyxJQUFJLENBQUNxQyxFQUFFOzRCQUNuQkQsT0FBT0YsUUFBUWxDLElBQUksQ0FBQ29DLEtBQUs7NEJBQ3pCRSxVQUFVSixFQUFBQSw4QkFBQUEsUUFBUWxDLElBQUksQ0FBQ3VDLGFBQWEsY0FBMUJMLGtEQUFBQSw0QkFBNEJNLFNBQVMsT0FBSU4sK0JBQUFBLFFBQVFsQyxJQUFJLENBQUN1QyxhQUFhLGNBQTFCTCxtREFBQUEsNkJBQTRCTyxJQUFJOzRCQUNuRkMsVUFBVSxHQUFFUiwrQkFBQUEsUUFBUWxDLElBQUksQ0FBQ3VDLGFBQWEsY0FBMUJMLG1EQUFBQSw2QkFBNEJRLFVBQVU7d0JBQ3BEO3dCQUNBMUIsa0JBQWtCVDtvQkFDcEIsT0FBTzt3QkFDTE0sUUFBUUMsR0FBRyxDQUFDO3dCQUNaLHNEQUFzRDt3QkFDdEQsSUFBSSxDQUFDUSxXQUFXOzRCQUNkckIsUUFBUTs0QkFDUkUsaUJBQWlCO3dCQUNuQjtvQkFDRjtvQkFDQUUsV0FBVztnQkFDYjtZQUNGLEVBQUUsT0FBT1UsT0FBTztnQkFDZEYsUUFBUUUsS0FBSyxDQUFDLDRCQUE0QkE7Z0JBQzFDLElBQUlNLFNBQVM7b0JBQ1gsd0RBQXdEO29CQUN4RCxJQUFJQyxXQUFXO3dCQUNiVCxRQUFRQyxHQUFHLENBQUM7d0JBQ1piLFFBQVE7d0JBQ1JJLFdBQVc7b0JBQ2IsT0FBTzt3QkFDTFEsUUFBUUMsR0FBRyxDQUFDO3dCQUNaYixRQUFRO3dCQUNSRSxpQkFBaUI7d0JBQ2pCRSxXQUFXO29CQUNiO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBa0I7UUFFQSwwQkFBMEI7UUFDMUIsTUFBTSxFQUFFVSxNQUFNLEVBQUVVLFlBQVksRUFBRSxFQUFFLEdBQUcvQyxtREFBUUEsQ0FBQzZCLElBQUksQ0FBQ21CLGlCQUFpQixDQUNoRSxPQUFPQyxPQUFPWDtnQkFDaUNBO1lBQTdDckIsUUFBUUMsR0FBRyxDQUFDLG9DQUEwQitCLE9BQU9YLG9CQUFBQSwrQkFBQUEsZ0JBQUFBLFFBQVNsQyxJQUFJLGNBQWJrQyxvQ0FBQUEsY0FBZUUsS0FBSztZQUVqRSxJQUFJLENBQUNmLFNBQVM7WUFFZCxJQUFJd0IsVUFBVSxnQkFBZ0IsQ0FBQ1gsU0FBUztnQkFDdENyQixRQUFRQyxHQUFHLENBQUM7Z0JBQ1piLFFBQVE7Z0JBQ1JrQjtnQkFDQWQsV0FBVztnQkFDWDtZQUNGO1lBRUEsSUFBSXdDLFVBQVUsZ0JBQWVYLG9CQUFBQSw4QkFBQUEsUUFBU2xDLElBQUksR0FBRTtvQkFTOUJrQyw2QkFBeUNBLDhCQUN2Q0E7Z0JBVGRyQixRQUFRQyxHQUFHLENBQUMsZ0NBQXNCb0IsUUFBUWxDLElBQUksQ0FBQ29DLEtBQUs7Z0JBQ3BEbkMsUUFBUWlDLFFBQVFsQyxJQUFJO2dCQUNwQkssV0FBVztnQkFFWCxpQ0FBaUM7Z0JBQ2pDLE1BQU1FLFdBQTBCO29CQUM5QjhCLElBQUlILFFBQVFsQyxJQUFJLENBQUNxQyxFQUFFO29CQUNuQkQsT0FBT0YsUUFBUWxDLElBQUksQ0FBQ29DLEtBQUs7b0JBQ3pCRSxVQUFVSixFQUFBQSw4QkFBQUEsUUFBUWxDLElBQUksQ0FBQ3VDLGFBQWEsY0FBMUJMLGtEQUFBQSw0QkFBNEJNLFNBQVMsT0FBSU4sK0JBQUFBLFFBQVFsQyxJQUFJLENBQUN1QyxhQUFhLGNBQTFCTCxtREFBQUEsNkJBQTRCTyxJQUFJO29CQUNuRkMsVUFBVSxHQUFFUiwrQkFBQUEsUUFBUWxDLElBQUksQ0FBQ3VDLGFBQWEsY0FBMUJMLG1EQUFBQSw2QkFBNEJRLFVBQVU7Z0JBQ3BEO2dCQUNBMUIsa0JBQWtCVDtnQkFFbEIsdUNBQXVDO2dCQUN2QyxJQUFJO29CQUNGTSxRQUFRQyxHQUFHLENBQUM7b0JBQ1osTUFBTWxCLG1EQUFRQSxDQUNYa0QsSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQzt3QkFDTlYsSUFBSUgsUUFBUWxDLElBQUksQ0FBQ3FDLEVBQUU7d0JBQ25CRCxPQUFPRixRQUFRbEMsSUFBSSxDQUFDb0MsS0FBSzt3QkFDekJFLFVBQVUvQixTQUFTK0IsUUFBUTt3QkFDM0JJLFlBQVluQyxTQUFTbUMsVUFBVTt3QkFDL0JNLFlBQVksSUFBSUMsT0FBT0MsV0FBVztvQkFDcEM7b0JBQ0ZyQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ2QsRUFBRSxPQUFPQyxPQUFPO29CQUNkRixRQUFRRSxLQUFLLENBQUMsK0JBQStCQTtnQkFDL0M7WUFDRixPQUFPO29CQUNHbUI7Z0JBQVJqQyxRQUFRaUMsQ0FBQUEsaUJBQUFBLG9CQUFBQSw4QkFBQUEsUUFBU2xDLElBQUksY0FBYmtDLDRCQUFBQSxpQkFBaUI7Z0JBQ3pCN0IsV0FBVztZQUNiO1FBQ0Y7UUFHRixPQUFPO1lBQ0xnQixVQUFVO1lBQ1ZzQixhQUFhUSxXQUFXO1lBQ3hCdEMsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7SUFDRixHQUFHLEVBQUU7SUFFTCxNQUFNc0MsbUJBQW1CO1FBQ3ZCLElBQUk7WUFDRnZDLFFBQVFDLEdBQUcsQ0FBQztZQUNaVCxXQUFXO1lBQ1gsTUFBTSxFQUFFVSxLQUFLLEVBQUUsR0FBRyxNQUFNbkIsbURBQVFBLENBQUM2QixJQUFJLENBQUM0QixlQUFlLENBQUM7Z0JBQ3BEQyxVQUFVO2dCQUNWQyxTQUFTO29CQUNQQyxZQUFZLEdBQTBCLE9BQXZCQyxPQUFPQyxRQUFRLENBQUNDLE1BQU07b0JBQ3JDQyxhQUFhO3dCQUNYQyxhQUFhO3dCQUNiQyxRQUFRO29CQUNWO2dCQUNGO1lBQ0Y7WUFDQSxJQUFJL0MsT0FBTztnQkFDVEYsUUFBUUUsS0FBSyxDQUFDLHVCQUF1QkE7Z0JBQ3JDVixXQUFXO1lBQ2IsT0FBTztnQkFDTFEsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRixFQUFFLE9BQU9DLE9BQU87WUFDZEYsUUFBUUUsS0FBSyxDQUFDLG9CQUFvQkE7WUFDbENWLFdBQVc7UUFDYjtJQUNGO0lBRUEsTUFBTTBELFVBQVU7UUFDZCxJQUFJO1lBQ0ZsRCxRQUFRQyxHQUFHLENBQUM7WUFDWlQsV0FBVztZQUNYLE1BQU0sRUFBRVUsS0FBSyxFQUFFLEdBQUcsTUFBTW5CLG1EQUFRQSxDQUFDNkIsSUFBSSxDQUFDc0MsT0FBTztZQUM3QyxJQUFJaEQsT0FBTztnQkFDVEYsUUFBUUUsS0FBSyxDQUFDLHdCQUF3QkE7WUFDeEMsT0FBTztnQkFDTEYsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7WUFDQSx3QkFBd0I7WUFDeEJOLGFBQWF3RCxLQUFLO1lBQ2xCQyxlQUFlRCxLQUFLO1lBQ3BCN0M7WUFDQWxCLFFBQVE7WUFDUkksV0FBVztRQUNiLEVBQUUsT0FBT1UsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMscUJBQXFCQTtZQUNuQ1YsV0FBVztRQUNiO0lBQ0Y7SUFFQSwrQ0FBK0M7SUFDL0Msb0VBQW9FO0lBQ3BFLE1BQU02RCxnQkFBZ0JsRSxRQUFTRSxDQUFBQSxnQkFBZ0I7UUFDN0NtQyxJQUFJbkMsY0FBY21DLEVBQUU7UUFDcEJELE9BQU9sQyxjQUFja0MsS0FBSztRQUMxQkcsZUFBZTtZQUNiQyxXQUFXdEMsY0FBY29DLFFBQVE7WUFDakNHLE1BQU12QyxjQUFjb0MsUUFBUTtZQUM1QkksWUFBWXhDLGNBQWN3QyxVQUFVO1FBQ3RDO0lBQ0YsSUFBWSxJQUFHO0lBRWYsT0FBTztRQUNMMUMsTUFBTWtFO1FBQ05oRTtRQUNBRTtRQUNBZ0Q7UUFDQVc7UUFDQUksV0FBVyxJQUFNakUsQ0FBQUEsMEJBQUFBLG9DQUFBQSxjQUFlbUMsRUFBRSxNQUFJckMsaUJBQUFBLDJCQUFBQSxLQUFNcUMsRUFBRSxLQUFJO1FBQ2xEK0IsaUJBQWlCLENBQUMsQ0FBRWxFLENBQUFBLGlCQUFpQkYsSUFBRztJQUMxQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUF1dGgudHM/OWM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJ1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuaW50ZXJmYWNlIExvY2FsVXNlckRhdGEge1xuICBpZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgdXNlcm5hbWU/OiBzdHJpbmdcbiAgYXZhdGFyX3VybD86IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXV0aCgpIHtcbiAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGU8VXNlciB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtsb2NhbFVzZXJEYXRhLCBzZXRMb2NhbFVzZXJEYXRhXSA9IHVzZVN0YXRlPExvY2FsVXNlckRhdGEgfCBudWxsPihudWxsKVxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKVxuXG4gIC8vIEdldCB1c2VyIGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgZ2V0TG9jYWxVc2VyRGF0YSA9ICgpOiBMb2NhbFVzZXJEYXRhIHwgbnVsbCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ211c2ljYXBwX3VzZXInKVxuICAgICAgaWYgKHVzZXJEYXRhKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodXNlckRhdGEpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OxIFJldHJpZXZlZCB1c2VyIGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2U6JywgcGFyc2VkKVxuICAgICAgICByZXR1cm4gcGFyc2VkXG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZygn8J+TsSBObyB1c2VyIGRhdGEgZm91bmQgaW4gbG9jYWxTdG9yYWdlJylcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBwYXJzaW5nIGxvY2FsU3RvcmFnZSB1c2VyIGRhdGE6JywgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIFNhdmUgdXNlciBkYXRhIHRvIGxvY2FsU3RvcmFnZVxuICBjb25zdCBzYXZlTG9jYWxVc2VyRGF0YSA9ICh1c2VyRGF0YTogTG9jYWxVc2VyRGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbXVzaWNhcHBfdXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSlcbiAgICAgIGNvbnNvbGUubG9nKCfwn5K+IFNhdmVkIHVzZXIgZGF0YSB0byBsb2NhbFN0b3JhZ2U6JywgdXNlckRhdGEpXG4gICAgICBzZXRMb2NhbFVzZXJEYXRhKHVzZXJEYXRhKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3Igc2F2aW5nIHVzZXIgZGF0YSB0byBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYXIgdXNlciBkYXRhIGZyb20gbG9jYWxTdG9yYWdlXG4gIGNvbnN0IGNsZWFyTG9jYWxVc2VyRGF0YSA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ211c2ljYXBwX3VzZXInKVxuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gQ2xlYXJlZCB1c2VyIGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2UnKVxuICAgICAgc2V0TG9jYWxVc2VyRGF0YShudWxsKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgY2xlYXJpbmcgbG9jYWxTdG9yYWdlOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlXG4gICAgY29uc29sZS5sb2coJ/CflIQgdXNlQXV0aCBlZmZlY3Qgc3RhcnRlZCcpXG5cbiAgICAvLyBDaGVjayBsb2NhbFN0b3JhZ2UgZmlyc3QgZm9yIGltbWVkaWF0ZSB1c2VyIGRhdGFcbiAgICBjb25zdCBsb2NhbERhdGEgPSBnZXRMb2NhbFVzZXJEYXRhKClcbiAgICBpZiAobG9jYWxEYXRhKSB7XG4gICAgICBzZXRMb2NhbFVzZXJEYXRhKGxvY2FsRGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVXNpbmcgbG9jYWxTdG9yYWdlIHVzZXIgZGF0YSBmb3IgaW1tZWRpYXRlIGFjY2VzcycpXG4gICAgfVxuXG4gICAgLy8gR2V0IGluaXRpYWwgc2Vzc2lvbiB3aXRoIHRpbWVvdXRcbiAgICBjb25zdCBnZXRJbml0aWFsU2Vzc2lvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIENoZWNraW5nIGZvciBleGlzdGluZyBzZXNzaW9uLi4uJylcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBhIHRpbWVvdXQgZm9yIHRoZSBzZXNzaW9uIGNoZWNrXG4gICAgICAgIGNvbnN0IHNlc3Npb25Qcm9taXNlID0gc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKClcbiAgICAgICAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1Nlc3Npb24gdGltZW91dCcpKSwgODAwMClcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0sIGVycm9yIH0gPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgIHNlc3Npb25Qcm9taXNlLFxuICAgICAgICAgIHRpbWVvdXRQcm9taXNlXG4gICAgICAgIF0pIGFzIGFueVxuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTZXNzaW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICAvLyBJZiBzZXNzaW9uIGZhaWxzIGJ1dCB3ZSBoYXZlIGxvY2FsIGRhdGEsIHVzZSBpdFxuICAgICAgICAgICAgaWYgKGxvY2FsRGF0YSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFNlc3Npb24gZmFpbGVkIGJ1dCB1c2luZyBsb2NhbFN0b3JhZ2UgZGF0YScpXG4gICAgICAgICAgICAgIHNldFVzZXIobnVsbCkgLy8gTm8gc2Vzc2lvbiB1c2VyIGJ1dCBrZWVwIGxvY2FsIGRhdGFcbiAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwgTm8gc2Vzc2lvbiBhbmQgbm8gbG9jYWxTdG9yYWdlIGRhdGEnKVxuICAgICAgICAgICAgICBzZXRVc2VyKG51bGwpXG4gICAgICAgICAgICAgIHNldExvY2FsVXNlckRhdGEobnVsbClcbiAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgIGlmIChzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFZhbGlkIHNlc3Npb24gZm91bmQgZm9yIHVzZXI6Jywgc2Vzc2lvbi51c2VyLmVtYWlsKVxuICAgICAgICAgICAgc2V0VXNlcihzZXNzaW9uLnVzZXIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhbFN0b3JhZ2Ugd2l0aCBmcmVzaCBzZXNzaW9uIGRhdGFcbiAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhOiBMb2NhbFVzZXJEYXRhID0ge1xuICAgICAgICAgICAgICBpZDogc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsISxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IHNlc3Npb24udXNlci51c2VyX21ldGFkYXRhPy5mdWxsX25hbWUgfHwgc2Vzc2lvbi51c2VyLnVzZXJfbWV0YWRhdGE/Lm5hbWUsXG4gICAgICAgICAgICAgIGF2YXRhcl91cmw6IHNlc3Npb24udXNlci51c2VyX21ldGFkYXRhPy5hdmF0YXJfdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYXZlTG9jYWxVc2VyRGF0YSh1c2VyRGF0YSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBObyB2YWxpZCBzZXNzaW9uIGZvdW5kJylcbiAgICAgICAgICAgIC8vIElmIG5vIHNlc3Npb24gYnV0IHdlIGhhdmUgbG9jYWwgZGF0YSwga2VlcCB1c2luZyBpdFxuICAgICAgICAgICAgaWYgKCFsb2NhbERhdGEpIHtcbiAgICAgICAgICAgICAgc2V0VXNlcihudWxsKVxuICAgICAgICAgICAgICBzZXRMb2NhbFVzZXJEYXRhKG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gZ2V0IHNlc3Npb246JywgZXJyb3IpXG4gICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgLy8gSWYgc2Vzc2lvbiBjaGVjayBmYWlscyBidXQgd2UgaGF2ZSBsb2NhbCBkYXRhLCB1c2UgaXRcbiAgICAgICAgICBpZiAobG9jYWxEYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFNlc3Npb24gY2hlY2sgZmFpbGVkIGJ1dCB1c2luZyBsb2NhbFN0b3JhZ2UgZGF0YScpXG4gICAgICAgICAgICBzZXRVc2VyKG51bGwpXG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4p2MIFNlc3Npb24gY2hlY2sgZmFpbGVkIGFuZCBubyBsb2NhbFN0b3JhZ2UgZGF0YScpXG4gICAgICAgICAgICBzZXRVc2VyKG51bGwpXG4gICAgICAgICAgICBzZXRMb2NhbFVzZXJEYXRhKG51bGwpXG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGdldEluaXRpYWxTZXNzaW9uKClcblxuICAgIC8vIExpc3RlbiBmb3IgYXV0aCBjaGFuZ2VzXG4gICAgY29uc3QgeyBkYXRhOiB7IHN1YnNjcmlwdGlvbiB9IH0gPSBzdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKFxuICAgICAgYXN5bmMgKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIEF1dGggc3RhdGUgY2hhbmdlZDonLCBldmVudCwgc2Vzc2lvbj8udXNlcj8uZW1haWwpXG4gICAgICAgIFxuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVyblxuXG4gICAgICAgIGlmIChldmVudCA9PT0gJ1NJR05FRF9PVVQnIHx8ICFzZXNzaW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkYsgVXNlciBzaWduZWQgb3V0JylcbiAgICAgICAgICBzZXRVc2VyKG51bGwpXG4gICAgICAgICAgY2xlYXJMb2NhbFVzZXJEYXRhKClcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50ID09PSAnU0lHTkVEX0lOJyAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkYsgVXNlciBzaWduZWQgaW46Jywgc2Vzc2lvbi51c2VyLmVtYWlsKVxuICAgICAgICAgIHNldFVzZXIoc2Vzc2lvbi51c2VyKVxuICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG5cbiAgICAgICAgICAvLyBTYXZlIHVzZXIgZGF0YSB0byBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICBjb25zdCB1c2VyRGF0YTogTG9jYWxVc2VyRGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsISxcbiAgICAgICAgICAgIHVzZXJuYW1lOiBzZXNzaW9uLnVzZXIudXNlcl9tZXRhZGF0YT8uZnVsbF9uYW1lIHx8IHNlc3Npb24udXNlci51c2VyX21ldGFkYXRhPy5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyX3VybDogc2Vzc2lvbi51c2VyLnVzZXJfbWV0YWRhdGE/LmF2YXRhcl91cmxcbiAgICAgICAgICB9XG4gICAgICAgICAgc2F2ZUxvY2FsVXNlckRhdGEodXNlckRhdGEpXG5cbiAgICAgICAgICAvLyBVcGRhdGUgbGFzdF9sb2dpbiB3aGVuIHVzZXIgc2lnbnMgaW5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk50gVXBkYXRpbmcgdXNlciBkYXRhIGluIGRhdGFiYXNlLi4uJylcbiAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgICAgICAgIC51cHNlcnQoe1xuICAgICAgICAgICAgICAgIGlkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCEsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGF2YXRhcl91cmw6IHVzZXJEYXRhLmF2YXRhcl91cmwsXG4gICAgICAgICAgICAgICAgbGFzdF9sb2dpbjogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFVzZXIgZGF0YSB1cGRhdGVkIGluIGRhdGFiYXNlJylcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHVwZGF0aW5nIHVzZXIgZGF0YTonLCBlcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0VXNlcihzZXNzaW9uPy51c2VyID8/IG51bGwpXG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtb3VudGVkID0gZmFsc2VcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCB1c2VBdXRoIGNsZWFudXAgY29tcGxldGVkJylcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHNpZ25JbldpdGhHb29nbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SQIFN0YXJ0aW5nIEdvb2dsZSBzaWduIGluLi4uJylcbiAgICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aE9BdXRoKHtcbiAgICAgICAgcHJvdmlkZXI6ICdnb29nbGUnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcmVkaXJlY3RUbzogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn1gLFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zOiB7XG4gICAgICAgICAgICBhY2Nlc3NfdHlwZTogJ29mZmxpbmUnLFxuICAgICAgICAgICAgcHJvbXB0OiAnY29uc2VudCcsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBzaWduaW5nIGluOicsIGVycm9yKVxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBHb29nbGUgc2lnbiBpbiBpbml0aWF0ZWQnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU2lnbiBpbiBlcnJvcjonLCBlcnJvcilcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfkYsgU3RhcnRpbmcgc2lnbiBvdXQuLi4nKVxuICAgICAgc2V0TG9hZGluZyh0cnVlKVxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KClcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3Igc2lnbmluZyBvdXQ6JywgZXJyb3IpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFN1Y2Nlc3NmdWxseSBzaWduZWQgb3V0JylcbiAgICAgIH1cbiAgICAgIC8vIENsZWFyIGFsbCBjYWNoZWQgZGF0YVxuICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKClcbiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKClcbiAgICAgIGNsZWFyTG9jYWxVc2VyRGF0YSgpXG4gICAgICBzZXRVc2VyKG51bGwpXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU2lnbiBvdXQgZXJyb3I6JywgZXJyb3IpXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybiBib3RoIHNlc3Npb24gdXNlciBhbmQgbG9jYWwgdXNlciBkYXRhXG4gIC8vIFByaW9yaXR5OiB1c2Ugc2Vzc2lvbiB1c2VyIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBsb2NhbCBkYXRhXG4gIGNvbnN0IGVmZmVjdGl2ZVVzZXIgPSB1c2VyIHx8IChsb2NhbFVzZXJEYXRhID8ge1xuICAgIGlkOiBsb2NhbFVzZXJEYXRhLmlkLFxuICAgIGVtYWlsOiBsb2NhbFVzZXJEYXRhLmVtYWlsLFxuICAgIHVzZXJfbWV0YWRhdGE6IHtcbiAgICAgIGZ1bGxfbmFtZTogbG9jYWxVc2VyRGF0YS51c2VybmFtZSxcbiAgICAgIG5hbWU6IGxvY2FsVXNlckRhdGEudXNlcm5hbWUsXG4gICAgICBhdmF0YXJfdXJsOiBsb2NhbFVzZXJEYXRhLmF2YXRhcl91cmxcbiAgICB9XG4gIH0gYXMgVXNlciA6IG51bGwpXG5cbiAgcmV0dXJuIHtcbiAgICB1c2VyOiBlZmZlY3RpdmVVc2VyLFxuICAgIGxvY2FsVXNlckRhdGEsXG4gICAgbG9hZGluZyxcbiAgICBzaWduSW5XaXRoR29vZ2xlLFxuICAgIHNpZ25PdXQsXG4gICAgZ2V0VXNlcklkOiAoKSA9PiBsb2NhbFVzZXJEYXRhPy5pZCB8fCB1c2VyPy5pZCB8fCBudWxsLFxuICAgIGlzQXV0aGVudGljYXRlZDogISEobG9jYWxVc2VyRGF0YSB8fCB1c2VyKVxuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VBdXRoIiwidXNlciIsInNldFVzZXIiLCJsb2NhbFVzZXJEYXRhIiwic2V0TG9jYWxVc2VyRGF0YSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZ2V0TG9jYWxVc2VyRGF0YSIsInVzZXJEYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsInNhdmVMb2NhbFVzZXJEYXRhIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNsZWFyTG9jYWxVc2VyRGF0YSIsInJlbW92ZUl0ZW0iLCJtb3VudGVkIiwibG9jYWxEYXRhIiwiZ2V0SW5pdGlhbFNlc3Npb24iLCJzZXNzaW9uUHJvbWlzZSIsImF1dGgiLCJnZXRTZXNzaW9uIiwidGltZW91dFByb21pc2UiLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJFcnJvciIsImRhdGEiLCJzZXNzaW9uIiwicmFjZSIsImVtYWlsIiwiaWQiLCJ1c2VybmFtZSIsInVzZXJfbWV0YWRhdGEiLCJmdWxsX25hbWUiLCJuYW1lIiwiYXZhdGFyX3VybCIsInN1YnNjcmlwdGlvbiIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJmcm9tIiwidXBzZXJ0IiwibGFzdF9sb2dpbiIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVuc3Vic2NyaWJlIiwic2lnbkluV2l0aEdvb2dsZSIsInNpZ25JbldpdGhPQXV0aCIsInByb3ZpZGVyIiwib3B0aW9ucyIsInJlZGlyZWN0VG8iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsInF1ZXJ5UGFyYW1zIiwiYWNjZXNzX3R5cGUiLCJwcm9tcHQiLCJzaWduT3V0IiwiY2xlYXIiLCJzZXNzaW9uU3RvcmFnZSIsImVmZmVjdGl2ZVVzZXIiLCJnZXRVc2VySWQiLCJpc0F1dGhlbnRpY2F0ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useAuth.ts\n"));

/***/ })

});